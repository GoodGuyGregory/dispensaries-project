<div class="decision-container">
    <div class="decision-form">
        <form [formGroup]="decisionForm" (ngSubmit)="searchCannabis()">
            <h1>Cannabis Attributes</h1>
            <p>How do you want to feel?</p>
            <mat-form-field appearance="outline">
                <mat-select placeholder="Select Effect" formControlName="effectChoice">
                    <div *ngFor="let effect of strainEffects">
                        <mat-option  value="{{effect}}" >{{effect}}</mat-option>
                    </div>
                </mat-select>
            </mat-form-field>
            <p>Which Type Of Cannabis Strain</p>
            <mat-form-field appearance="outline">
                <mat-select placeholder="Hybrid/Sativa/Indica" formControlName="strainType">
                    <div *ngFor="let type of strainTypes">
                        <mat-option value="{{type}}">{{ type }}</mat-option>
                    </div>
                </mat-select>
            </mat-form-field>
            <p>What Flavor Matters to you?</p>
            <mat-form-field appearance="outline">
                <mat-select placeholder="Select Effect" formControlName="flavor">
                    <div *ngFor="let flavor of flavorOptions">
                        <div *ngIf="flavor !== null">
                            <mat-option value="{{flavor}}" >{{ flavor }}</mat-option>
                        </div>
                    </div>
                </mat-select>
            </mat-form-field>
            <p>How Highly Rated?</p>
            <div class="rater-slider">
                
                    <mat-slider min="1" max="5" step="0.10" showTickMarks discrete color="accent" >
                        <input matSliderThumb #strainRating  formControlName="rating" >
                    </mat-slider>
    
                
            </div>
            
            <div class="form-actions">
                <button mat-raised-button [routerLink]="'/'">Back</button>     
                <button mat-raised-button color="accent" [disabled]="decisionForm.invalid" >Search</button>     
            </div>
        </form>
    </div> 


<div class="search-results" *ngIf="this.searching">
    <div class="results-table">
        <div class="options" *ngIf="searchOptions">
            <div *ngIf="loading">
                <mat-spinner color="accent"></mat-spinner>
            </div>
        </div>
        <div class="strain-options" >
            <h1>Cannabis Strain Options</h1>
            <table mat-table [dataSource]="dataSource" matSort [hidden]="this.noResults">
                <ng-container matColumnDef="Select" >
                    <th mat-header-cell *matHeaderCellDef> Select </th>
                    <td mat-cell *matCellDef="let option">
                    <mat-checkbox (click)="$event.stopPropagation()" (change)="toggleSelection(option)" [checked]="selection.isSelected(option)"></mat-checkbox>
                    </td>
                </ng-container>
                <ng-container matColumnDef="Strain">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Strain Name </th>
                  <td mat-cell *matCellDef="let option"> {{option.Strain}} </td>
                </ng-container>
                <ng-container matColumnDef="Description">
                    <th mat-header-cell *matHeaderCellDef > Description </th>
                    <td mat-cell *matCellDef="let option"> {{option.Description}} </td>
                </ng-container>
                <ng-container matColumnDef="Type">
                  <th mat-header-cell *matHeaderCellDef > Strain Type </th>
                  <td mat-cell *matCellDef="let option"> {{option.Type}} </td>
                </ng-container>
                <ng-container matColumnDef="Rating">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Rating </th>
                  <td mat-cell *matCellDef="let option"> {{option.Rating}} </td>
                </ng-container>
                <ng-container matColumnDef="Flavor">
                  <th mat-header-cell *matHeaderCellDef > Flavor </th>
                  <td mat-cell *matCellDef="let option"> {{option.Flavor}} </td>
                </ng-container>
                <ng-container matColumnDef="Effects">
                  <th mat-header-cell *matHeaderCellDef > Effects </th>
                  <td mat-cell *matCellDef="let option"> {{option.Effects}} </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
            <mat-paginator #paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
        </div>
        <div class="strain-actions">
            <button mat-raised-button color="primary" [disabled]="this.selection.isEmpty()" (click)="navigateToSearchForm()">Choose Strain</button>     
        </div>
    </div>  
</div>

</div>
